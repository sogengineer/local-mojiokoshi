---
description: 音声ファイルを文字起こしして議事録サマリを作成
allowed-tools: Bash, Read, Write, Edit, AskUserQuestion
arguments:
  - name: audio_file
    description: 音声ファイルのパス
    required: true
  - name: output_file
    description: 出力ファイルのパス
    required: true
  - name: model
    description: モデルサイズ (tiny/base/small/medium/large-v3)
    required: false
    default: small
---

# 音声文字起こし & 議事録作成ワークフロー

## 入力情報

- 音声ファイル: $1
- 出力先: $2
- モデルサイズ: $3（tiny / base / small / medium / large-v3）

## 実行手順

1. **入力確認**: 音声ファイルパスと出力先が指定されていない場合は、ユーザーに確認してください。
   - 音声ファイル ($1) が空の場合: 「音声ファイルのパスを入力してください（例: /path/to/audio.m4a）」
   - 出力先 ($2) が空の場合: 「出力ファイルのパスを入力してください（例: /path/to/meeting_notes.md）」
   - モデルサイズ ($3) が空の場合: デフォルトで `small` を使用（処理速度と精度のバランスが良い）
     - 高精度が必要な場合は `large-v3` を推奨（ただし処理時間が長くなる）
     - 素早く結果が欲しい場合は `tiny` または `base` を使用

2. **文字起こし実行**: 以下のコマンドで文字起こしを実行
   ```bash
   uv run mojiokoshi file <音声ファイル> -m <モデルサイズ> -o <一時テキストファイル>
   ```

3. **文字起こし結果を読み込み**: 生成されたテキストファイルを読み込む

4. **誤字・誤認識の修正**: 文字起こし結果に対して以下の観点で修正を行う
   - **同音異義語**: 文脈から正しい漢字に修正（例：「以上」↔「異常」、「機会」↔「機械」）
   - **専門用語**: 業界用語やテクニカルタームを正しい表記に修正
   - **人名・固有名詞**: 会社名、製品名、人名などを文脈から推測して統一
   - **句読点**: 不自然な位置の句読点を修正し、読みやすく整形
   - **繰り返し・フィラー**: 「えー」「あのー」などの不要な言葉を削除
   - **文の区切り**: 適切な位置で文を区切り、段落を整理
   - **会話の不自然さの削除** 誤字を直しても会話が不自然だったら修正を行う。ただし、内容を捏造してはいけない

5. **議事録サマリ作成**: 修正した文字起こし結果を以下の形式でMarkdownにまとめる
   ```markdown
   # 議事録

   ## 概要
   （会議の目的・主題を1-2文で）

   ## 参加者
   （判別できる場合のみ）

   ## 議論のポイント
   - ポイント1
   - ポイント2
   - ...

   ## 決定事項
   - 決定1
   - 決定2
   - ...

   ## アクションアイテム
   - [ ] タスク1（担当者）
   - [ ] タスク2（担当者）
   - ...

   ## 次回に向けて
   （次のステップや予定）

   ---

   ## 文字起こし全文（修正済み）
   （誤字修正後の文字起こしテキスト。以下の形式で会話の流れを細かく記載する）

   ### 会話の流れの記載ルール
   - **発言単位で改行**: 一人の発言ごとに「**参加者**: 」を付けて改行し、会話の往復が分かるようにする
   - **相槌・反応も記載**: 「なるほど」「そうですね」などの相槌も省略せず記載
   - **議論の区切り**: トピックが変わる箇所には「---」で区切り線を入れる
   - **補足情報**: 文脈理解に必要な場合は【】で補足説明を追加（例：【トピック: レビュー負荷について】）

   ### 記載例
   ```
   【トピック: テスト方針について】

   **参加者**: フロントの単体テストがないのが原因じゃないですかね。

   **参加者**: そうですね、前から課題に上がってましたよね。

   **参加者**: 書くのが大変なのは、コンポーネントが分離されてないからですよね。

   **参加者**: ページに全部ぶち込んでる感じですね。

   **参加者**: なるほど。確かにそれは書きにくい。

   ---

   【トピック: 改善案について】
   ...
   ```
   ```

6. **ファイル保存**: 指定された出力先にMarkdownファイルを保存

7. **完了報告**: 保存したファイルパスをユーザーに報告
